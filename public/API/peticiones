<!DOCTYPE html>

<html lang="en">

  <head>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <link href="//fonts.googleapis.com/css?family=PT+Serif" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=PT+Sans" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">

    
      
        <title>
          Peticiones  - Gestii Knowledge Base </title>
      
    

		<link rel="shortcut icon" href="/favicon.png" />

		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

    <link rel="stylesheet" href="//menteslibres.net/static/normalize/normalize.css" />

    <link rel="stylesheet" href="//menteslibres.net/static/bootstrap/css/bootstrap.css" />

    <link rel="stylesheet" href="//menteslibres.net/static/highlightjs/styles/solarized_dark.css">
    <script src="//menteslibres.net/static/highlightjs/highlight.pack.js"></script>

    <link rel="stylesheet" href="/css/styles.css" />

    <script type="text/javascript" src="/js/main.js"></script>

		<style type="text/css">
			body {
				font-family: 'PT Sans';
				font-size: large;
			}
			code {
				font-family: 'Source Code Pro';
			}
			img.textsize {
				height: 1.5em;
			}
		</style>

  </head>

  <body>

    <div class="container" id="container">
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">

          <a class="brand" href="/"><img style="height: 25px; padding: none;" src=/images/logo.png />  Gestii Knowledge Base</a>

          <div class="nav-collapse">
            
              <ul id="nav" class="nav menu">
                
                  <li><a href="/visitas">Visitas</a></li>
                
                  <li><a href="/cuestionarios">Cuestionarios</a></li>
                
                  <li><a href="/administradores">Administradores</a></li>
                
                  <li><a href="/mapas">Mapas</a></li>
                
                  <li><a href="/grupos">Grupos</a></li>
                
                  <li><a href="/misc">Misc</a></li>
                
                  <li><a href="/API">API</a></li>
                
              </ul>
            
            
              <ul id="nav" class="nav pull-right menu">
                
                  <li><a target="_blank" href="http://gestii.com">Gestii</a></li>
                
              </ul>
            
          </div>

        </div>
      </div>
    </div>

    

      
        <ul class="breadcrumb menu">
          
            <li><a href="/">Home</a> <span class="divider">/</span></li>
          
            <li><a href="/API/">API</a> <span class="divider">/</span></li>
          
        </ul>
      

      <div class="container-fluid">

        <div class="row">
          
            
              <div class="span3">
                  <ul class="nav nav-list menu">
                    
                      <li>
                        <a href="/API/auxiliares">Auxiliares</a>
                      </li>
                    
                      <li>
                        <a href="/API/auxiliares.md.bak">Auxiliares.md.bak</a>
                      </li>
                    
                      <li>
                        <a href="/API/cookbook">Cookbook</a>
                      </li>
                    
                      <li>
                        <a href="/API/cookbook.md.bak">Cookbook.md.bak</a>
                      </li>
                    
                      <li>
                        <a href="/API/index.md.bak">Index.md.bak</a>
                      </li>
                    
                      <li>
                        <a href="/API/objetos">Objetos</a>
                      </li>
                    
                      <li>
                        <a href="/API/objetos.md.bak">Objetos.md.bak</a>
                      </li>
                    
                      <li>
                        <a href="/API/operaciones">Operaciones</a>
                      </li>
                    
                      <li>
                        <a href="/API/operaciones.md.bak">Operaciones.md.bak</a>
                      </li>
                    
                      <li>
                        <a href="/API/peticiones">Peticiones</a>
                      </li>
                    
                      <li>
                        <a href="/API/peticiones.md.bak">Peticiones.md.bak</a>
                      </li>
                    
                  </ul>
              </div>
              <div class="span8">
                

                <h1>Peticiones</h1>

<ul>
<li><a href="#auth">Autorización</a></li>
<li><a href="#limits">Límite de peticiones</a></li>
<li><a href="#data-types">Tipos de datos</a></li>
</ul>

<p>Las peticiones de esta API deben ser dirigidas a la URL base <code>https://sitio.gestii.com/api/v1/</code>, donde <code>sitio</code> representa el subdominio único que elegiste al crear tu cuenta de Gestii, y realizadas exclusivamente a través de HTTPS. Cualquier petición hecha sobre HTTP plano será rechazada.</p>

<p>Para indicar la intención de una petición, hacemos uso de los siguientes verbos estándares de HTTP:</p>

<ul>
<li><code>GET</code> - Para listar un recurso o una colección de recursos.</li>
<li><code>POST</code> - Para crear un recurso o para métodos especiales.</li>
<li><code>PUT</code> - Para actualizar un recurso.</li>
<li><code>DELETE</code> - Para eliminar un recurso.</li>
</ul>

<p>Si estás utilizando un cliente HTTP que no soporte métodos <code>PUT</code> o <code>DELETE</code>, puedes reemplazarlos haciendo una petición <code>POST</code> con el encabezado <code>X-HTTP-Method-Override</code> especificando el verbo deseado. Por ejemplo, para <a href="#agents-delete">eliminar un agente</a>:</p>

<pre><code>$ curl https://sitio.gestii.com/api/v1/agents/1?apikey=123456 \
    -X POST \
    -H &#34;X-HTTP-Method-Override: DELETE&#34;
</code></pre>

<p>&lt;#auth&gt;</p>

<h2>Autorización</h2>

<p>Todas las peticiones de la API de Gestii deben estar debidamente autenticadas con la API key de un admin y realizadas sobre HTTPS. Cualquier petición hecha sin una API key válida o sobre HTTP plano será rechazada.</p>

<p>Cada una de los métodos descritos en esta API —aun cuando no se indique explícitamente— recibe un parámetro adicional obligatorio llamado <code>apikey</code> que deberá contener una API key válida similar a la siguiente cadena:</p>

<pre><code>1c7a92ae351d4e21ebdfb897508f59d6
</code></pre>

<p>Una API key con todos los permisos será enviada a tu correo electrónico al crear tu cuenta de Gestii. Posteriormente podrás generar más llaves con distintos permisos desde la aplicación web o desde esta misma API.</p>

<p>&lt;#limits&gt;</p>

<h2>Límite de peticiones</h2>

<p>Esta API está limitada a 100 peticiones por minuto por cuenta, distribuídas entre todos los métodos y todas las API keys que se encuentren realizando peticiones. El estatus del límite actual se indica con los siguientes encabezados en todas las respuestas:</p>

<pre><code>X-Rate-Limit: 100
X-Rate-Remaining: 99
X-Rate-Reset: 59
</code></pre>

<p>Donde <code>X-Rate-Limit</code> es el número máximo de peticiones por minuto que están disponibles para la cuenta, <code>X-Rate-Remaining</code> el número de peticiones restantes para el periodo actual y <code>X-Rate-Reset</code> el número de segundos restantes para que el contador vuelva a iniciar.</p>

<p>Si el limite se llegara a alcanzar, la API responderá con un código <code>429 Too Many Requests</code> y tu aplicación no deberá enviar más peticiones hasta que los segundos indicados en <code>X-Rate-Reset</code> hayan transcurrido.</p>

<p>&lt;#data-types&gt;</p>

<h2>Tipos de datos</h2>

<p>Todos los atributos de objetos y parámetros de peticiones de esta API se encuentran representados por alguno de los siguientes tipos de datos:</p>

<table>
<thead>
<tr>
<th>Tipo</th>
<th>Notas</th>
</tr>
</thead>

<tbody>
<tr>
<td>Integer</td>
<td>Números enteros de 4 bytes.</td>
</tr>

<tr>
<td>Boolean</td>
<td>Uno de: <code>1</code> o <code>true</code> para verdadero, <code>0</code> o <code>false</code> para falso.</td>
</tr>

<tr>
<td>String</td>
<td>Cadena de caracteres de hasta 255 caracteres.</td>
</tr>

<tr>
<td>Text</td>
<td>Cadena de caracteres de hasta 65,535 caracteres.</td>
</tr>

<tr>
<td>CSV</td>
<td>Listado de valores separados por comas.</td>
</tr>

<tr>
<td>Timestamp</td>
<td>En formato <a href="http://es.wikipedia.org/wiki/ISO_8601">ISO 8601</a> con la zona horaria configurada para la API key.</td>
</tr>

<tr>
<td>Date</td>
<td>En formato <code>YYMMDD</code>.</td>
</tr>

<tr>
<td>DateTime</td>
<td>En formato <code>YYMMDDHHmmSS</code> con modificadores de rangos.</td>
</tr>
</tbody>
</table>

<p>&lt;#type-basics&gt;</p>

<h3>Básicos</h3>

<p>Los tipos de datos <code>Integer</code>, <code>Boolean</code>, <code>String</code> y <code>Text</code> son considerados tipos de datos básicos con los que muy probablemente te encuentras familiarizado. Los tipos <code>Integer</code> y <code>Boolean</code> no se diferencian de los conceptos de cualquier lenguaje de programación que los implemente. Los tipos <code>String</code> y <code>Text</code> son ambos cadenas de caracteres cuya única diferencia es la longitud máxima que aceptan.</p>

<p>&lt;#type-csv&gt;</p>

<h3>CSV</h3>

<p>El tipo de dato <code>CSV</code> se utiliza para representar listados en los parámetros de una petición y es siempre formateado como una cadena de valores separados por comas. Por ejemplo: <code>id,username,email</code> o inclusive solo <code>id</code>, que representaría una lista de un solo elemento.</p>

<p>Aunque esta API no impone un límite duro sobre la longitud de un parámetro tipo <code>CSV</code>, ten en cuenta que los métodos que pudieran requerir cadenas particularmente largas siempre serán <code>POST</code> o <code>PUT</code> y deberás tratar el parámetro como parte del cuerpo de la petición, no de la URL.</p>

<p>&lt;#type-timestamp&gt;</p>

<h3>Timestamp</h3>

<p>El tipo de dato <code>Timestamp</code> se utiliza para representar fechas en las respuestas de las peticiones y es siempre formateado de acuerdo al estándar internacional <a href="http://es.wikipedia.org/wiki/ISO_8601">ISO 8601</a> incluyendo la zona horaria del <a href="#admins">Admin</a> para el cual haya sido generada la <a href="#request-auth">API key</a> que está realizando la petición.</p>

<p>&lt;#type-date&gt;</p>

<h3>Date</h3>

<p>El tipo de dato <code>Date</code> se utiliza para representar una fecha en las peticiones con el formato <code>YYMMDD</code>. Este tipo de dato no acepta rangos.</p>

<p>&lt;#type-datetime&gt;</p>

<h3>DateTime</h3>

<p>El tipo de dato <code>DateTime</code> se utiliza para representar fechas en los parámetros de una petición. Es preferido sobre <code>Timestamp</code> para enviar fechas como parámetros debido a que cuenta con un formato más simple, además de soportar modificadores para crear rangos útiles para buscar.</p>

<p>El formato de un <code>DateTime</code> se compone de 12 dígitos, donde los primeros 6 representan la fecha (<code>YYMMDD</code>) y los restantes la hora (<code>HHmmSS</code>). Un ejemplo  de <code>DateTime</code> para el “8 de noviembre de 2013 a las 14:35:23” sería el siguiente: <code>131108143523</code>.</p>

<h4>Rangos de fechas</h4>

<p>Adicional a estos 12 dígitos, es posible agregar un modificador (opcional) para crear rangos de fechas, convirtiendo algo como <code>131108143523+1d</code> en un rango de <code>131108143523</code> a <code>131109143523</code>. Observa que al final de los dígitos de la hora ha sido agregado un <code>+1d</code> para indicar que el rango es a partir de esa fecha a un día despues. Esta característica también funciona para crear rangos restando el modificador, es decir: <code>131108143523-1d</code> se convierte en un rango de <code>131107143523</code> a <code>131108143523</code>. Observa que la fecha menor ha sido colocada al inicio del rango.</p>

<p>Los modificadores válidos para sumar o restar a un <code>DateTime</code> son los siguientes: <code>m</code> (minutos), <code>d</code> (días), <code>w</code> (semanas), <code>M</code> (meses). Cada uno de estos modificadores deberá ir antecedido por un signo de <code>+</code> o <code>-</code> para indicar la dirección del rango y un número entero positivo indicando el número de veces que se deberá extender dicho rango.</p>

<p><strong>Nota:</strong> Observa que los minutos se distinguen de los meses al ser los primeros una <code>m</code> minúscula y los segundos una <code>M</code> mayúscula.</p>


                
              </div>
            
          
        </div>

      </div>

    

    <hr />



    

  </body>
</html>
